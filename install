#!/bin/bash

PS3="Partycjonowanie dysku: "
options=("calosc na partycji glownej /" "Osobna partycja dla /home")
select opt in "${options[@]}"
do
    case $opt in
        "Calosc na partycji glownej /")
    while [[ $mainpart != /dev/sd[a-z][1-9] ]]; do
    read -p "Podaj partycje, ktora bedzie partycja glowna / (e.g. /dev/sda1): " mainpart
    [[ $mainpart == /dev/sd[a-z][1-9] ]] || echo "Invalid format"
    done
    mount "$mainpart" /mnt
        "Osobna partycja dla /home")
    while [[ $mainpart != /dev/sd[a-z][1-9] ]]; do
    read -p "Podaj partycje, ktora bedzie partycja glowna / (e.g. /dev/sda1): " mainpart
    [[ $mainpart == /dev/sd[a-z][1-9] ]] || echo "Invalid format"
    done
    while [[ $homepart != /dev/sd[a-z][1-9] ]]; do
    read -p "Podaj partycje, ktora bedzie partycja /home (e.g. /dev/sda1): " homepart
    [[ $homepart == /dev/sd[a-z][1-9] ]] || echo "Invalid format"
    done
    mount "$mainpart" /mnt
    mount "$homepart" /mnt/home
    break
    ;;
        *)
    echo "Nieprawidlowa opcja"
    ;;
esac
done
pacstrap -K /mnt base linux linux-firmware
cp script /mnt/script
genfstab -U /mnt >> /mnt/etc/fstab
arch-chroot /mnt bash script
